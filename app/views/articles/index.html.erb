<% total_pages = (Article.count / @per_page) %>
<% total_pages += 1 if Article.count % @per_page != 0 %>
<% if @actual.to_i == 1 %>
  <div class="main-header">
    <div class="main-title-outer">
      <h1 class="main-title"><i class="fa-solid fa-pen-nib ico-blue"></i> Artigos</h1>
      <h4>Informação no tamanho certo</h4>
    </div>
    <div class="main-middle">
    </div>
    <div class="sec-title-outer">
      
      <p class="sec-title"></p>
    </div>
  </div>
<% end %>
<div class="container">
  <%= render partial: "alert" %>
  <% if @actual.to_i != 1 %>
    <div class="central">
      <div class="article-title">
        <h2></h2><i class="fa-solid fa-pen-nib ico-blue"></i> Artigos</h2>
      </div>
    </div>
  <% end %>
  <div class="articles">
    <% @articles.each do |article| %>
      <div class="article-view bordered shadowed padded">
        
        <%= link_to article_path(article), class:"article-link" do %>
        <div class="article-title">
          <%= article.title %>
        </div>
        <div class="article-user">
          <i class="fa-solid fa-user"></i> <i><%= article.user.fullname %> - <%= article.created_at.strftime("%d/%m/%Y %H:%M") %></i>
        </div>
        <% if article.date_time_changed? %>
          <div class="article-user">
            <i>Editado em: <%= article.updated_at.strftime("%d/%m/%Y %H:%M") %></i>
          </div>
        <% end %>
        <div class="outer">
          <div class="article-body">
            <%= truncate_article(article, Setting.truncate_limit) %>
            <strong><%= link_to "Ver artigo completo", article_path(article), class: "lnk" %></strong>
          </div>
          <% end %>
          <div>
            <%= return_img(article.content) %>
          </div>
        </div>
        <div>
          <% if current_user.id == article.user.id %>
            <%= link_to "Editar", edit_article_path(article), class: "lnk" %>
          <% end %>
        </div>
        
        <div class="comments">
          <% @comments = article.comments %>
          <%= render_comments_max(@comments) %>
        </div>
      </div>
    <% end %>
  </div>
  <div class="central">
  <div class="pages">
  <% (1..total_pages).each_with_index do |page, idx| %>
    <% if @actual.to_i == (idx + 1) %>
      <%= link_to page, root_path(page: page), class: "btn pages" %>
    <% else %>
      <%= link_to page, root_path(page: page), class: "lnk pages" %>
    <% end %>    
  <% end %>
  </div>
  </div>
</div>